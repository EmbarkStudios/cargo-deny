<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>config - cargo-deny</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> cargo-deny</a></li><li class="chapter-item expanded "><a href="../../cli/index.html"><strong aria-hidden="true">2.</strong> Command Line Tool</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../cli/common.html"><strong aria-hidden="true">2.1.</strong> common</a></li><li class="chapter-item expanded "><a href="../../cli/init.html"><strong aria-hidden="true">2.2.</strong> init</a></li><li class="chapter-item expanded "><a href="../../cli/check.html"><strong aria-hidden="true">2.3.</strong> check</a></li><li class="chapter-item expanded "><a href="../../cli/list.html"><strong aria-hidden="true">2.4.</strong> list</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/index.html"><strong aria-hidden="true">3.</strong> Checks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/cfg.html"><strong aria-hidden="true">3.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/advisories/index.html"><strong aria-hidden="true">3.2.</strong> advisories</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/advisories/cfg.html"><strong aria-hidden="true">3.2.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/advisories/diags.html"><strong aria-hidden="true">3.2.2.</strong> diagnostics</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/bans/index.html"><strong aria-hidden="true">3.3.</strong> bans</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/bans/cfg.html"><strong aria-hidden="true">3.3.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/bans/diags.html"><strong aria-hidden="true">3.3.2.</strong> diagnostics</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/licenses/index.html"><strong aria-hidden="true">3.4.</strong> licenses</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/licenses/cfg.html"><strong aria-hidden="true">3.4.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/licenses/diags.html"><strong aria-hidden="true">3.4.2.</strong> diagnostics</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/sources/index.html"><strong aria-hidden="true">3.5.</strong> sources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/sources/cfg.html" class="active"><strong aria-hidden="true">3.5.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/sources/diags.html"><strong aria-hidden="true">3.5.2.</strong> diagnostics</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">cargo-deny</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-sources-section"><a class="header" href="#the-sources-section">The <code>[sources]</code> section</a></h1>
<p>Contains all of the configuration for <code>cargo deny check sources</code></p>
<h2 id="example-config"><a class="header" href="#example-config">Example Config</a></h2>
<pre><code class="language-ini">[sources]
unknown-registry = &quot;allow&quot;
unknown-git = &quot;deny&quot;
required-git-spec = &quot;tag&quot;
allow-registry = [
    &quot;https://sekretz.com/registry/index&quot;,
    &quot;sparse+https://fake.sparse.com&quot;,
]
allow-git = [
    &quot;https://notgithub.com/orgname/reponame.git&quot;,
]
private = [
    &quot;https://internal-host/repos&quot;,
]
unused-allowed-source = &quot;warn&quot;
[sources.allow-org]
github = [
    &quot;yourghid&quot;,
    &quot;YourOrg&quot;,
]
gitlab = [
    &quot;gitlab-org&quot;,
]
bitbucket = [
    &quot;atlassian&quot;,
]
</code></pre>
<h3 id="the-unknown-registry-field-optional"><a class="header" href="#the-unknown-registry-field-optional">The <code>unknown-registry</code> field (optional)</a></h3>
<p>Determines what happens when a crate from a crate registry that is not in the <code>allow-registry</code> list is encountered.</p>
<ul>
<li><code>deny</code> - Will emit an error with the URL of the source, and fail the check.</li>
<li><code>warn</code> (default) - Prints a warning for each crate, but does not fail the check.</li>
<li><code>allow</code> - Prints a note for each crate, but does not fail the check.</li>
</ul>
<h3 id="the-unknown-git-field-optional"><a class="header" href="#the-unknown-git-field-optional">The <code>unknown-git</code> field (optional)</a></h3>
<p>Determines what happens when a crate from a git repository not in the <code>allow-git</code> list is encountered.</p>
<ul>
<li><code>deny</code> - Will emit an error with the URL of the repository, and fail the check.</li>
<li><code>warn</code> (default) - Prints a warning for each crate, but does not fail the check.</li>
<li><code>allow</code> - Prints a note for each crate, but does not fail the check.</li>
</ul>
<h3 id="the-required-git-spec-optional"><a class="header" href="#the-required-git-spec-optional">The <code>required-git-spec</code> (optional)</a></h3>
<p>Determines which <a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#specifying-dependencies-from-git-repositories">specifiers</a> are required for git sources. Git sources are a convenient way to use patched code temporarily, but they have downsides for long term maintenance, as the specifier you use for the source determines what happens when you do a <code>cargo update</code>, and in the default case, this means you essentially have a wildcard dependency on the repository.</p>
<p>This configuration value allows you to control what specifiers you want to allow for your git sources to reduce surprises. The following values are listed in order from least to most specific, and using a less specific specifier will also allow all of the more specific ones.</p>
<ul>
<li><code>any</code> (default) - Allows all git specs, including the default of not having
any specifier, which tracks the latest commit on the <code>master</code> branch of the repo</li>
<li><code>branch</code> - Allows the <code>branch = &quot;&lt;branch_name&gt;&quot;</code> specifier.</li>
<li><code>tag</code> - Allows the <code>tag = &quot;&lt;tag_name&gt;&quot;</code> specifier.</li>
<li><code>rev</code> - Allows the <code>rev = &quot;&lt;commit_sha&gt;&quot;</code> specifier.</li>
</ul>
<h3 id="the-allow-git-field-optional"><a class="header" href="#the-allow-git-field-optional">The <code>allow-git</code> field (optional)</a></h3>
<p>Configure which git urls are allowed for crate sources. If a crate's source is not in one of the listed urls, then the <code>unknown-git</code> setting will determine how it is handled. Note that the url must match exactly, though <code>.git</code> is stripped if it exists to match the logic of cargo.</p>
<pre><code class="language-ini">[sources]
allow-git = [
    &quot;https://github.com/EmbarkStudios/cargo-deny&quot;,
]
</code></pre>
<h3 id="the-private-field-optional"><a class="header" href="#the-private-field-optional">The <code>private</code> field (optional)</a></h3>
<p>Similarly to <code>allow-git</code>, allows you to configure urls, however, unlike <code>allow-git</code> which is meant for a single, exact, url, <code>private</code> urls actually allow <em>any</em> git repo url which matches the host and begins with the same path. This field is primarily meant to support the use of internal/private git hosts (usually on a VPN) without needing to specify each individual repo. Of course, this can be used to also just allow every repo on Github, but this is not recommended. ðŸ˜‰</p>
<pre><code class="language-ini">[sources]
private = [
    &quot;https://super-duper-sekret&quot;,
]
</code></pre>
<h3 id="the-allow-registry-field-optional"><a class="header" href="#the-allow-registry-field-optional">The <code>allow-registry</code> field (optional)</a></h3>
<p>The list of registries that are allowed. If a crate is not found in one of the listed registries, then the <code>unknown-registry</code> setting will determine how it is handled.</p>
<p>If not specified, this list will by default contain the <a href="http://crates.io">crates.io</a> registry, equivalent to this:</p>
<pre><code class="language-ini">[sources]
allow-registry = [
    &quot;https://github.com/rust-lang/crates.io-index&quot;,
]
</code></pre>
<p>To not allow any crates registries, set it to empty:</p>
<pre><code class="language-ini">[sources]
unknown-registry = &quot;deny&quot;
allow-registry = []
</code></pre>
<h3 id="the-allow-org-field-optional"><a class="header" href="#the-allow-org-field-optional">The <code>allow-org</code> field (optional)</a></h3>
<p>Generally, I think most projects in the Rust space probably follow a similar procedure as we do when they want to fix a bug or add a feature to one of their dependencies, which is basically.</p>
<ol>
<li>Fork the crate to make your changes</li>
<li>Hack away locally, probably just patching your project(s) to use a <code>path</code> dependency to the cloned fork</li>
<li>Push changes to your fork, and once you're happy, change the <code>path</code> dependency to a <code>git</code> dependency and point it to your fork for others/CI to be able to use the same changes easily</li>
<li>Eventually (hopefully!) make a PR to the original repo with your changes</li>
<li>Hopefully get your changes merged to the original repo</li>
<li>Wait until a release is made that incorporates your changes, possibly changing the <code>git</code> source to point to the original repo</li>
<li>Remove the <code>git</code> source and instead point at the new version of the crate with your changes</li>
<li>Profit!</li>
</ol>
<p>When working in a company or organization, it is often the case that all crates will be forked to a shared organization account rather than a personal Github account. However, if you lint your git sources, every new and deleted fork needs to keep that list updated, which is tedious, even if all the forks fall under the same organization (in Github terminology), even though presumably only people you trust have permission to create forks there, and you would like to just blanket trust any repo under that org.</p>
<p>The <code>allow-org</code> object allows you to specify multiple organizations or users in several VCS providers to more easily configure git sources for your projects.</p>
<h4 id="the-github-field-optional"><a class="header" href="#the-github-field-optional">The <code>github</code> field (optional)</a></h4>
<p>Allows you to specify multiple <code>github.com</code> organizations to allow as git sources.</p>
<pre><code class="language-ini">[sources.allow-org]
github = [&quot;YourCoolOrgGoesHere&quot;]
</code></pre>
<h4 id="the-gitlab-field-optional"><a class="header" href="#the-gitlab-field-optional">The <code>gitlab</code> field (optional)</a></h4>
<p>Allows you to specify multiple <code>gitlab.com</code> organizations to allow as git sources.</p>
<pre><code class="language-ini">[sources.allow-org]
gitlab = [&quot;YourCoolOrgGoesHere&quot;]
</code></pre>
<h4 id="the-bitbucket-field-optional"><a class="header" href="#the-bitbucket-field-optional">The <code>bitbucket</code> field (optional)</a></h4>
<p>Allows you to specify multiple <code>bitbucket.org</code> organizations to allow as git sources.</p>
<pre><code class="language-ini">[sources.allow-org]
bitbucket = [&quot;YourCoolOrgGoesHere&quot;]
</code></pre>
<h3 id="the-unused-allowed-source-field-optional"><a class="header" href="#the-unused-allowed-source-field-optional">The <code>unused-allowed-source</code> field (optional)</a></h3>
<p>Determines what happens when one of the sources that appears in the <code>allow</code> list is not encountered in the dependency graph.</p>
<ul>
<li><code>warn</code> (default) - A warning is emitted for each source that appears in <code>sources.allow</code> but which is not used in any crate.</li>
<li><code>allow</code> - Unused sources in the <code>sources.allow</code> list are ignored.</li>
<li><code>deny</code> - An unused source in the <code>sources.allow</code> list triggers an error, and cause the source check to fail.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../checks/sources/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../checks/sources/diags.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../checks/sources/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../checks/sources/diags.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
