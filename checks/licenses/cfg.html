<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>config - cargo-deny</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> cargo-deny</a></li><li class="chapter-item expanded "><a href="../../cli/index.html"><strong aria-hidden="true">2.</strong> Command Line Tool</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../cli/common.html"><strong aria-hidden="true">2.1.</strong> common</a></li><li class="chapter-item expanded "><a href="../../cli/init.html"><strong aria-hidden="true">2.2.</strong> init</a></li><li class="chapter-item expanded "><a href="../../cli/check.html"><strong aria-hidden="true">2.3.</strong> check</a></li><li class="chapter-item expanded "><a href="../../cli/list.html"><strong aria-hidden="true">2.4.</strong> list</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/index.html"><strong aria-hidden="true">3.</strong> Checks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/cfg.html"><strong aria-hidden="true">3.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/advisories/index.html"><strong aria-hidden="true">3.2.</strong> advisories</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/advisories/cfg.html"><strong aria-hidden="true">3.2.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/advisories/diags.html"><strong aria-hidden="true">3.2.2.</strong> diagnostics</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/bans/index.html"><strong aria-hidden="true">3.3.</strong> bans</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/bans/cfg.html"><strong aria-hidden="true">3.3.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/bans/diags.html"><strong aria-hidden="true">3.3.2.</strong> diagnostics</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/licenses/index.html"><strong aria-hidden="true">3.4.</strong> licenses</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/licenses/cfg.html" class="active"><strong aria-hidden="true">3.4.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/licenses/diags.html"><strong aria-hidden="true">3.4.2.</strong> diagnostics</a></li></ol></li><li class="chapter-item expanded "><a href="../../checks/sources/index.html"><strong aria-hidden="true">3.5.</strong> sources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checks/sources/cfg.html"><strong aria-hidden="true">3.5.1.</strong> config</a></li><li class="chapter-item expanded "><a href="../../checks/sources/diags.html"><strong aria-hidden="true">3.5.2.</strong> diagnostics</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">cargo-deny</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-licenses-section"><a class="header" href="#the-licenses-section">The <code>[licenses]</code> section</a></h1>
<p>Contains all of the configuration for <code>cargo deny check license</code>.</p>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-ini">[licenses]
unused-allowed-license = &quot;warn&quot;
confidence-threshold = 0.95
allow = [
    &quot;EUPL-1.2&quot;,
    &quot;Apache-2.0 WITH LLVM-exception&quot;,
]

[licenses.private]
ignore = true
registries = [&quot;sekrets&quot;]

[[licenses.exceptions]]
allow = [&quot;Zlib&quot;]
name = &quot;adler32&quot;
version = &quot;0.1.1&quot;

[[licenses.clarify]]
name = &quot;ring&quot;
expression = &quot;MIT AND ISC AND OpenSSL&quot;
license-files = [
    { path = &quot;LICENSE&quot;, hash = 0xbd0eed23 }
]
</code></pre>
<h2 id="spdx-identifiers"><a class="header" href="#spdx-identifiers">SPDX Identifiers</a></h2>
<p>All identifiers used in the license configuration section are expected to be valid SPDX v2.1 short identifiers, either from version 3.11 of the <a href="https://spdx.org/licenses/">SPDX License List</a>, or use a <a href="https://spdx.github.io/spdx-spec/appendix-V-using-SPDX-short-identifiers-in-source-files/#format-for-spdx-license-identifier">custom identifier</a> by prefixing it with <code>LicenseRef-</code>.</p>
<pre><code class="language-ini">allow = [
    # The Apache license identifier
    &quot;Apache-2.0&quot;,
    # A custom license identifier
    &quot;LicenseRef-Embark-Custom&quot;,
]

# Custom license refs can be specified for crates which don't use a license
# in the SPDX list
[[licenses.clarify]]
crate = &quot;a-crate&quot;
expression = &quot;LicenseRef-Embark-Custom&quot;
license-files = [
    { path = &quot;LICENSE&quot;, hash = 0x001c7e6c },
]
</code></pre>
<p>License identifiers can also be coupled with an optional <a href="https://spdx.org/licenses/exceptions-index.html">exception</a> by appending <code>WITH &lt;exception-id&gt;</code> to the license identifier. Licenses coupled with exceptions are considered distinct from the same license without the exception.</p>
<pre><code class="language-ini">allow = [
    # The Apache license identifier
    &quot;Apache-2.0&quot;,
    # The Apache license + LLVM-exception
    &quot;Apache-2.0 WITH LLVM-exception&quot;,
]
</code></pre>
<h3 id="the-include-dev-field-optional"><a class="header" href="#the-include-dev-field-optional">The <code>include-dev</code> field (optional)</a></h3>
<p>If <code>true</code>, licenses are checked even for <code>dev-dependencies</code>. By default this is false as <code>dev-dependencies</code> are not used by downstream crates, nor part of binary artifacts.</p>
<h3 id="the-include-build-field-optional"><a class="header" href="#the-include-build-field-optional">The <code>include-build</code> field (optional)</a></h3>
<p>If <code>true</code>, licenses are checked for <code>build-dependencies</code>. By default this is true because build-dependencies can influence build artifacts and are often relevant to licensing. Set this to <code>false</code> if you wish to exclude <code>build-dependencies</code> from license checks.</p>
<h3 id="the-version-field-optional"><a class="header" href="#the-version-field-optional">The <code>version</code> field (optional)</a></h3>
<pre><code class="language-ini">version = 2
</code></pre>
<p>The version field is (at the time of this writing) no longer used, the following fields have been removed and will now emit errors.</p>
<ul>
<li><code>unlicensed</code> - Removed, if a crate is unlicensed you should open an issue/PR to fix it, and in the meantime, you may add a <a href="#the-clarify-field-optional">clarification</a>.</li>
<li><code>deny</code> - Removed, all licenses are denied unless explicitly allowed</li>
<li><code>copyleft</code> - Removed, all licenses are denied unless explicitly allowed</li>
<li><code>allow-osi-fsf-free</code> - Removed, all licenses are denied unless explicitly allowed</li>
<li><code>default</code> - Removed, all licenses are denied unless explicitly allowed</li>
</ul>
<h3 id="the-allow-field-optional"><a class="header" href="#the-allow-field-optional">The <code>allow</code> field (optional)</a></h3>
<p>The licenses that are explicitly allowed. Licenses not in this list are denied by default, so if none of the licenses listed here can satisfy the license expression used by the project, the license check will fail.</p>
<h4 id="note-on-gnu-licenses"><a class="header" href="#note-on-gnu-licenses">Note on GNU licenses</a></h4>
<ul>
<li>GPL</li>
<li>AGPL</li>
<li>LGPL</li>
<li>GFDL</li>
</ul>
<p>The GNU licenses are, of course, different from all the other licenses in the SPDX list which makes them annoying to deal with. In versions of cargo-deny &lt;= 0.18.3 it would try to treat GNU licenses similarly to other licenses, attempting to follow the same rules as other licenses.</p>
<p>As of 0.18.4, GNU licenses are now treated pedantically. For example, if you want to allow <code>GPL-3.0</code> (deprecated), or <code>GPL-3.0-or-later</code> licenses, or <code>GPL-2.0-or-later</code>, but not <code>GPL-3.0-only</code>, you would need to do the following.</p>
<pre><code class="language-ini">allow = ['GPL-2.0-or-later', 'GPL-3.0', 'GPL-3.0-or-later']
</code></pre>
<p>This also means that if a project declares their license as <code>GPL-2.0</code>, the deprecated form, you can't use <code>GPL-2.0-only</code>, it only matches <code>GPL-2.0</code>.</p>
<h3 id="the-exceptions-field-optional"><a class="header" href="#the-exceptions-field-optional">The <code>exceptions</code> field (optional)</a></h3>
<p>The license configuration generally applies to the entire crate graph, but this means that allowing any one license applies to all possible crates, even if only 1 crate actually uses that license. The <code>exceptions</code> field is meant to allow additional licenses only for particular crates, to make a clear distinction between licenses which you are fine with everywhere, versus ones which you want to be more selective about, and not have implicitly allowed in the future.</p>
<p>This field uses <a href="../cfg.html#package-specs">PackageSpecs</a> to select the crate the exception applies to.</p>
<h3 id="additional-exceptions-configuration-file"><a class="header" href="#additional-exceptions-configuration-file">Additional exceptions configuration file</a></h3>
<p>In some cases it's useful to have global cargo-deny config and project-local exceptions. This can be accomplished with a project exceptions file in any of these locations relative to your top level <code>Cargo.toml</code> manifest file.</p>
<p><code>cargo-deny</code> will look for the following files: <code>&lt;cwd&gt;/deny.exceptions.toml</code>, <code>&lt;cwd&gt;/.deny.exceptions.toml</code> and <code>&lt;cwd&gt;/.cargo/deny.exceptions.toml</code></p>
<p>Only the exceptions field should be set:</p>
<pre><code class="language-ini">exceptions = [
    # Each entry is the crate and version constraint, and its specific allow list.
    { allow = [&quot;CDDL-1.0&quot;], crate = &quot;inferno&quot; },
]
</code></pre>
<h4 id="the-allow-field"><a class="header" href="#the-allow-field">The <code>allow</code> field</a></h4>
<p>This is the exact same as the general <code>allow</code> field.</p>
<pre><code class="language-ini">[licenses]
allow = [
    &quot;Apache-2.0&quot;,
    &quot;MIT&quot;,
]
exceptions = [
    # This is the only crate that cannot be licensed with either Apache-2.0
    # or MIT, so we just add an exception for it, meaning we'll get a warning
    # if we add another crate that also requires this license
    { crate = &quot;cloudabi&quot;, allow = [&quot;BSD-2-Clause&quot;] },
]
</code></pre>
<h3 id="the-confidence-threshold-field-optional"><a class="header" href="#the-confidence-threshold-field-optional">The <code>confidence-threshold</code> field (optional)</a></h3>
<p><code>cargo-deny</code> uses <a href="https://github.com/amzn/askalono">askalono</a> to determine the license of a LICENSE file. Due to variability in license texts because of things like authors, copyright year, and so forth, askalano assigns a confidence score to its determination, from <code>0.0</code> (no confidence) to <code>1.0</code> (perfect match). The confidence threshold value is used to reject the license determination if the score does not match or exceed the threshold.</p>
<p><code>0.0</code> - <code>1.0</code> (default <code>0.8</code>)</p>
<h3 id="the-clarify-field-optional"><a class="header" href="#the-clarify-field-optional">The <code>clarify</code> field (optional)</a></h3>
<p>In some exceptional cases, a crate will not have easily machine readable license information, and would by default be considered &quot;unlicensed&quot; by cargo-deny. As a (hopefully) temporary patch for using the crate, you can specify a clarification for the crate by manually assigning its SPDX expression, based on one or more files in the crate's source. cargo-deny will use that expression for as long as the source files in the crate exactly match the clarification's hashes.</p>
<p>This field uses <a href="../cfg.html#package-specs">PackageSpecs</a> to select the crate the clarification applies to.</p>
<pre><code class="language-ini">[[licenses.clarify]]
crate = &quot;webpki&quot;
expression = &quot;ISC&quot;
license-files = [
    { path = &quot;LICENSE&quot;, hash = 0x001c7e6c },
]
</code></pre>
<h4 id="the-expression-field"><a class="header" href="#the-expression-field">The <code>expression</code> field</a></h4>
<p>The <a href="https://spdx.github.io/spdx-spec/v2.3/SPDX-license-expressions/">SPDX license expression</a> you are specifying as the license requirements for the crate.</p>
<h4 id="the-license-files-field"><a class="header" href="#the-license-files-field">The <code>license-files</code> field</a></h4>
<p>Contains one or more files that will be checked to ensure the license expression still applies to a version of the crate.</p>
<h5 id="the-path-field"><a class="header" href="#the-path-field">The <code>path</code> field</a></h5>
<p>The crate relative path to a file to be used as a source of truth.</p>
<h5 id="the-hash-field"><a class="header" href="#the-hash-field">The <code>hash</code> field</a></h5>
<p>An opaque hash calculated from the file contents. This hash can be obtained from the output of the license check when cargo-deny can't determine the license of the file in question.</p>
<h3 id="the-private-field-optional"><a class="header" href="#the-private-field-optional">The <code>private</code> field (optional)</a></h3>
<p>It's often not useful or wanted to check for licenses in your own private workspace crates. So the private field allows you to do so.</p>
<h4 id="the-ignore-field"><a class="header" href="#the-ignore-field">The <code>ignore</code> field</a></h4>
<p>If <code>true</code>, workspace members will not have their license expression checked if they are not published.</p>
<pre><code class="language-ini"># Cargo.toml
[package]
name = &quot;sekret&quot;
license = &quot;¯\_(ツ)_/¯&quot;
publish = false # &quot;private&quot;!
</code></pre>
<pre><code class="language-ini"># deny.toml
[licenses]
# The sekret package would be ignored now
private = { ignore = true }
</code></pre>
<h3 id="the-registries-field"><a class="header" href="#the-registries-field">The <code>registries</code> field</a></h3>
<p>A list of private registries you may publish your workspace crates to. If a workspace member <strong>only</strong> publishes to private registries, it will also be ignored if <code>private.ignore = true</code></p>
<pre><code class="language-ini"># Cargo.toml
[package]
name = &quot;sekret&quot;
license = &quot;¯\_(ツ)_/¯&quot;
publish = [&quot;sauce&quot;]
</code></pre>
<pre><code class="language-ini"># deny.toml
[licenses]
# Still ignored!
private = { ignore = true, registries = [&quot;sauce&quot;] }
</code></pre>
<h3 id="the-ignore-sources-field"><a class="header" href="#the-ignore-sources-field">The <code>ignore-sources</code> field</a></h3>
<p>A list of registries that crates can be sourced from that will not have their licenses checked.</p>
<pre><code class="language-ini"># deny.toml
[licenses.private]
ignore = true
ignore-sources = [&quot;https://sekretz.com/super/secret-index&quot;]
</code></pre>
<h3 id="the-unused-allowed-license-field-optional"><a class="header" href="#the-unused-allowed-license-field-optional">The <code>unused-allowed-license</code> field (optional)</a></h3>
<p>Determines what happens when one of the licenses that appears in the <a href="#the-allow-field-optional"><code>allow</code></a> list is not encountered in the dependency graph.</p>
<ul>
<li><code>warn</code> (default) - A warning is emitted for each license that appears in <code>license.allow</code> but which is not used in any crate.</li>
<li><code>allow</code> - Unused licenses in the <code>licenses.allow</code> list are ignored.</li>
<li><code>deny</code> - An unused license in the <code>licenses.allow</code> list triggers an error, and cause the license check to fail.</li>
</ul>
<h3 id="the-unused-license-exception-field-optional"><a class="header" href="#the-unused-license-exception-field-optional">The <code>unused-license-exception</code> field (optional)</a></h3>
<p>Same as <a href="#the-unused-allowed-license-field-optional"><code>unused-allowed-license</code></a> but for <a href="#the-exceptions-field-optional"><code>exceptions</code></a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../checks/licenses/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../checks/licenses/diags.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../checks/licenses/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../checks/licenses/diags.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
